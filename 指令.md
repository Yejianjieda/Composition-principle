# 指令格式

指令： 由一系列的二进制位组成的，这些位可以表示不同的操作、操作数地址，跳转目标等

指令有自己的布局格式，叫做指令格式，指令的格式或布局定义了指令在计算机内存中的表示方式。

操作码+地址码

操作码   该指令执行什么操作

地址码  被操作的信息的地址/数据

对于MIPS架构，每条指令都是32位长，这与MIPS体系结构中的数据字的位数相一致，这种固定长度的指令格式简化的了指令的解码和执行过程，因为CPU不需要再读取指令时确定指令的长度

在计算机科学中 ， 我们通常将这种直接表示为二进制形式的指令称为`机器语言`或`机器码`

字：计算机一次能处理的一个数据，一个字由若干个字节组成

（机器）字长：字的长度（位数），等于CPU内部用于整数运算的运算器的位数或者是寄存器的位数

----------------------------------------------------------------------------------------

指令字长：一条指令中包含的二进制位数，一条指令的长度

存储资产：一个存储单元的二进制位数

指令字长：n*存储字长      n>=1

指令字长占四个字节，存储字长占两个字节

问：我从内存中取出一个指令，需要多少次---2次

----------------------------------------------------------------------------------------

由汇编指令到机器码

该指令包含了一个操作码和三个寄存器。

关于寄存器，这些寄存器在汇编语言中有特定的名称，如 $s0 、 $s1 、 $t0 、 $t1 等。在底层，这些寄存器的名字会被映射成数字，以便硬件能够识别和操作。

例如：
寄存器 $s0 ~ $s7 在 MIPS 中映射到数字 16 ~ 23。
寄存器 $t0 ~ $t7 映射到数字 8 ~ 15。这种映射关系使得汇编语言编写的程序能够在底层被正确地转换成机器码，并由硬件执行。当汇编器或编译器处理源代码时，它会将这些寄存器名称转换为相应的数字，以生成正确的机器码。


这种映射关系的设计允许指令集保持简洁和一致，同时使得硬件实现更加高效。

**由于MIPS指令是固定长度的32位，操作码和其他字段的位置是固定的**

![image-20240908144234817](C:\Users\20655\AppData\Roaming\Typora\typora-user-images\image-20240908144234817.png)



![image-20240908145142848](C:\Users\20655\AppData\Roaming\Typora\typora-user-images\image-20240908145142848.png)

![image-20240908145332528](C:\Users\20655\AppData\Roaming\Typora\typora-user-images\image-20240908145332528.png)

I型：rs rt寄存器    立即数

1. 双目运算指令rs第一源操作 立即数作为第二源操作数----->rt目标寄存器中

   Addi $s1 $s2 100   s2+100放到s1里

2. lw/ls   rs中的符号数据符号拓展后的立即数----->内存地址

3. 分支指令：让rs和rt中的数据进行比较

J型指令：跳转







对于指令的设计，我们既希望所有指令长度相同，又希望具有统一的指令格式，两者之间产生了冲突。这就引出了最后一条硬件设计原则：优秀的设计需要适宜的折中方案。

在设计计算机体系结构时，需要在寄存器数量和指令长度之间做出权衡：

一方面，更多的寄存器能够减少对内存的访问频率，提高程序执行效率，因为寄存器比主存更快且
访问延迟更短。然而，每增加一个寄存器就需要在指令格式中为该寄存器编号分配额外的位数。

另一方面，保持指令长度不变有利于简化处理器设计和优化流水线处理，同时也有助于减小存储指
令所需的存储空间。

因此，在实际应用中，现代指令集架构往往会选择一个折衷方案，比如提供16个或32个通用寄存器，以平衡性能需求与指令编码复杂度之间的关系。像RISC-V等一些现代ISA也通过灵活的扩展机制来解决这一问题，允许根据不同的应用场景和资源需求选择合适的寄存器组大小和其他特性。

### 存储程序

当今设计计算机，**指令用数字的形式表示。计算机内部采用二进制形式来表示指令和数据**。计算机设计原则
数据既然可以存储在存储器中。那么是不是程序也可以，并且我们可以读写程序？

由此法引出存储程序 （stored- program） 的概念。

这是冯·诺依曼体系结构的核心特征之一，**它指出程序和数据在计算机内存中是统一存储和处理的，并且都可以被CPU读取和写入**。因此，编辑器程序的源代码可以存放在存储器中，经过编译器编译成机器码后也保存在同一存储器内。当计算机运行时，它可以依次取出指令执行，从而使计算机能够实现动态加载和执行不同程序的能力，极大地提升了计算机系统的灵活性和通用性。

这一革命性的设计使得计算机能够在无需硬件改动的情况下，仅通过改变存储在内存中的程序就可实现不同的计算任务，从而释放了计算机的巨大潜力，为现代信息技术的发展奠定了基础

----学某个架构的指令格式

